'use strict';var __asumi__=(function(){if(window.__asumi__!==undefined){return window.__asumi__;}
var __asumi__={overlayPicked:false,audienceId:null,friendly:null,EventManager:(function(){var EventManager=function(){this.events=[];};EventManager.prototype={events:null,on:function(target,event,listener,deley){deley=deley||0;var timer=null;var dispatcher=function(e){if(deley>0){window.clearTimeout(timer);timer=window.setTimeout(function(){listener(target,e);},deley);}else{listener(target,e);}};__asumi__.util.dom.on(target,event,dispatcher);this.events.push({target:target,event:event,dispatcher:dispatcher});return this;},off:function(){for(var index=0;index<this.events.length;index++){var event=this.events[index];__asumi__.util.dom.off(event.target,event.event,event.dispatcher);}
this.events=[];}};return EventManager;})(),Barrel:function(arg){arg=arg||{};if(arg instanceof Function){arg={render:arg};}
var callbacks=['prepare','response','render'];for(var index=0;index<callbacks.length;index++){var callback=callbacks[index];this[callback]=arg[callback]||function(){};}},Bullet:(function(){var Bullet=function(frameId,provider,frameResourceid,ref,type,src,subject,description,param,imageUrl,width,height,asIframe,effect,optoutRef,optoutImageUrl,trackClick,sponsor){this.frameId=frameId;this.provider=provider;this.id=frameResourceid;this.ref=ref;this.type=type;this.src=src;this.subject=subject;this.description=description;this.param=param;this.imageUrl=imageUrl;this.width=width;this.height=height;this.asIframe=asIframe;this.effect=effect;this.optoutRef=optoutRef;this.optoutImageUrl=optoutImageUrl;this.trackClick=trackClick;this.sponsor=sponsor;};Bullet.prototype={frameId:null,provider:null,id:null,ref:null,type:null,src:null,subject:null,description:null,param:null,imageUrl:null,width:null,height:null,asIframe:null,effect:null,resourceContainer:null,optoutRef:null,optoutImageUrl:null,trackClick:null,sponsor:null,render:function(html,frameContainer){var frameContainerId='asumi-frame-'+this.frameId;var resourceContainerId='asumi-frame-'+this.frameId+'-'+this.id;if(frameContainer===undefined||frameContainer===null){frameContainer=document.getElementById(frameContainerId);}
if(this.asIframe){if(frameContainer!==null){this.resourceContainer=document.createElement('div');this.resourceContainer.setAttribute('id',resourceContainerId);frameContainer.appendChild(this.resourceContainer);}else{document.write('<div id="'+resourceContainerId+'"></div>');this.resourceContainer=document.getElementById(resourceContainerId);}
var iframe=document.createElement('iframe');iframe.setAttribute('framespacing',0);iframe.setAttribute('frameborder','no');iframe.setAttribute('scrolling','no');__asumi__.util.dom.setStyle(iframe,{width:this.width!==null?this.width+'px':'100%',height:this.height!==null?this.height+'px':0,borderWidth:0,display:'block'});this.resourceContainer.appendChild(iframe);var iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write('<html><head></head><body>'+html+'</body></html>');iframeDocument.close();__asumi__.util.dom.setStyle(iframeDocument.body,{margin:0,padding:0});}else{if(frameContainer!==null){this.resourceContainer=document.createElement('div');this.resourceContainer.setAttribute('id',resourceContainerId);this.resourceContainer.innerHTML=html;var children=[];var scripts=this.resourceContainer.getElementsByTagName('script');for(var index=0;index<scripts.length;index++){var origin=scripts[index];var script=document.createElement('script');if(origin.getAttribute('type')!==null){script.setAttribute('type',origin.getAttribute('type'));}
if(origin.getAttribute('src')!==null){script.setAttribute('src',origin.getAttribute('src'));}else{script.text=origin.text;}
origin.parentNode.replaceChild(script,origin);}
frameContainer.appendChild(this.resourceContainer);}else{document.write('<div id="'+resourceContainerId+'">'+html+'</div>');this.resourceContainer=document.getElementById(resourceContainerId);}}
if(this.width!==null){__asumi__.util.dom.setStyle(this.resourceContainer,{width:this.width+'px'});}
if(this.height!==null){__asumi__.util.dom.setStyle(this.resourceContainer,{height:this.height+'px'});}
if(this.effect!==null){__asumi__.effect[this.effect].apply(this.resourceContainer,this);}
__asumi__.track.watchElement(this.id,this.resourceContainer);},destroy:function(async){this.resourceContainer.removeAttribute('style');if(this.effect!==null){__asumi__.effect[this.effect].unapply(this.resourceContainer,this);}
if(async){var iframes=this.resourceContainer.getElementsByTagName('iframe');for(var index=0;iframes.length>index;index++){__asumi__.util.dom.setStyle(iframes[index],{display:'none'});}}}};return Bullet;})(),fetchFriendly:function(callback){if(__asumi__.friendly===null){var friendlyCallback=__asumi__.jsonp.registerCallback('friendly',function(friendly){__asumi__.friendly=friendly;callback(friendly);});var script=document.createElement('script');script.setAttribute('type','text/javascript');script.setAttribute('charset','utf-8');script.setAttribute('src','//asumi.shinobi.jp/friendly?step=1&callback='+friendlyCallback);document.body.appendChild(script);}else{callback(__asumi__.friendly);}},fetchAudienceId:function(callback){if(__asumi__.audienceId===null){var syncCallback=__asumi__.jsonp.registerCallback('sync',function(audienceId){__asumi__.audienceId=audienceId;callback(__asumi__.audienceId);});var script=document.createElement('script');script.setAttribute('type','text/javascript');script.setAttribute('charset','utf-8');script.setAttribute('src','//sync.shinobi.jp/v2/sync/ne?t=jsonp&cb='+syncCallback);document.body.appendChild(script);}else{callback(__asumi__.audienceId);}},load:function(frameId,callback){var callbackName=__asumi__.jsonp.registerCallback('load_'+frameId,callback);var script=document.createElement('script');script.setAttribute('type','text/javascript');script.setAttribute('src','//asumi.shinobi.jp/fire?f='+frameId+'&c='+callbackName);document.body.appendChild(script);},fire:function(frame,callbackName,observerName){var picker={pick:function(rates){var total=0;for(var index=0;index<rates.length;index++){total+=rates[index];}
var pickOffset=Math.floor(Math.random()*total)+1;var pickIndex=0;var offset=0;do{offset+=rates[pickIndex++];}while(offset<pickOffset);return pickIndex-1;},pickItem:function(items){items=items.sort(function(a,b){return a.id-b.id;});var enabled=[];var rates=[];for(var index=0;index<items.length;index++){if(items[index].origin.state==='enabled'&&items[index].rate>0){enabled.push(items[index]);rates.push(items[index].rate);}}
if(enabled.length===0){return null;}
return enabled[picker.pick(rates)];},pickResource:function(resources){resources=resources.sort(function(a,b){return a.id-b.id;});var picked=[];var enabled=[];var rates=[];for(var index=0;index<resources.length;index++){var rate=resources[index].rate!==null?resources[index].rate:resources[index].origin.rate;var start=resources[index].start!==null?__asumi__.util.toDate(resources[index].start):null;var end=resources[index].end!==null?__asumi__.util.toDate(resources[index].end):null;var started=true;var ended=false;var now=new Date();if(start!==null){started=now.getTime()-start.getTime()>=0;}
if(end!==null){ended=now.getTime()-end.getTime()>0;}
if(resources[index].origin.state==='enabled'&&rate>0&&started&&!ended){enabled.push(resources[index]);rates.push(rate);}}
if(enabled.length===0){return null;}
return enabled[picker.pick(rates)];}};var rePick=(function(currentGlobalVariable){return function(async){if(pickedResource!==null){pickedResource.rate=0;}
if(async){frame.as='iframe';}
pickedItem.rate=picker.pickResource(pickedItem.resources)===null?0:pickedItem.rate;__asumi__.overlayPicked=currentGlobalVariable.overlayPicked;window.ninja_smart_phone_ads=currentGlobalVariable.ninja_smart_phone_ads;__asumi__.fire(frame,callbackName,observerName);};})({overlayPicked:__asumi__.overlayPicked,ninja_smart_phone_ads:window.ninja_smart_phone_ads});if(frame===undefined||frame===null||frame.state===undefined){return;}
if(frame.state!=='enabled'){return;}
if((frame.as==='overlay'||frame.effect==='overlay')&&__asumi__.overlayPicked){return;}
if(frame.as==='overlay'||frame.effect==='overlay'){var scripts=document.getElementsByTagName('script');for(var index=0;scripts.length>index;index++){if(!scripts[index].hasAttribute('src')){continue;}
if(scripts[index].src.indexOf('/parts.blog.livedoor.jp/js/')!==-1){return;}}}
if(window.document.referrer!==undefined&&window.document.referrer){if((function(){let domains=['3star-tool.com','access-ad.com','accessup.goldcows.com','ex-surf.com','kingmail.jp','laurasurf.com','speedtraffics.biz','surf.orange-park.jp','traffic-bsj.net','traffic-ch.com','traffic-exchange.tv','traffic-no1.com','traffic-ocean.biz','trafficgain.ziyu.net','trafficspammer.com','www.bc-traffic.jp','www.ex-surf.com','www.monkey-traffic.com','nwttrafficnetwork.com','www.laurasurf.com','www.open-accessup.com','www.poteto-traffic.com','www.traffic-exchange.tv','www.traffic-no1.com','www.upaccess.jp','blue-cloud.net','ad-site55.net','ex.bomcity.com','www.sakusaku-exchange.com','access-up.in','ads.acesse.com','trafficjungle.mond.jp','upaccess.jp','www.autoearnhits.com','www.myhitsforever.com','www.trafficmaker.jp'];for(var index=0;index<domains.length;index++){if(window.document.referrer.indexOf(domains[index])>=0){return true;}}
return false;})()){return;}}
__asumi__.overlayPicked=__asumi__.overlayPicked||frame.as==='overlay';var pickedItem=picker.pickItem(frame.items);if(pickedItem===null){return;}
if((frame.as==='overlay'||frame.effect==='overlay')&&pickedItem.origin.provider!=='ad_admax'){window.ninja_smart_phone_ads=true;}
var pickedResource=picker.pickResource(pickedItem.resources);if(pickedResource===null){rePick();return;}
if(pickedResource.origin.type===__asumi__.config.resource.type.chikayo){rePick();return;}
__asumi__.passback.registerCallback(frame.id,function(async){async=async||false;if(async&&document.getElementById('asumi-frame-'+frame.id)===null){var frameContainer=document.createElement('div');frameContainer.setAttribute('id','asumi-frame-'+frame.id);bullet.resourceContainer.parentNode.insertBefore(frameContainer,bullet.resourceContainer);}
__asumi__.track.passback(pickedResource.id);__asumi__.track.unregister(pickedResource.id);bullet.destroy(async);rePick(async);});__asumi__.track.register(pickedResource.id,undefined,observerName!==undefined&&observerName!==null?__asumi__.util.dotToObject(observerName):{update:function(){}}).pick(pickedResource.id);if(pickedResource.origin.type===__asumi__.config.resource.type.empty){return;}
var bullet=new __asumi__.Bullet(frame.id,pickedItem.origin.provider,pickedResource.id,pickedResource.origin.ref,pickedResource.origin.type,pickedResource.origin.src,pickedResource.origin.subject,pickedResource.origin.description,pickedResource.origin.param,/^image\//.test(pickedResource.origin.type)?('//cnobi.jp/v1/asumi/resource/'+pickedResource.origin.id):null,frame.width,frame.height,frame.as==='iframe',frame.effect,null,null,null,null);var barrel=new __asumi__.Barrel((callbackName!==undefined&&callbackName!==null)?__asumi__.util.dotToObject(callbackName):function(bullet){var html=null;if(/^image\//.test(bullet.type)){var ltIE9=document.uniqueID!==undefined&&window.matchMedia===undefined;html='<a href="'+bullet.ref+'" target="_blank"><img src="'+bullet.imageUrl+'" alt="'+(bullet.subject!==null?bullet.subject:'')+'" '+(ltIE9?'border="0"':'')+' /></a>';}else if(bullet.type===__asumi__.config.resource.type.html){html=bullet.src;}else if(bullet.type===__asumi__.config.resource.type.text){html='<a href="'+bullet.ref+'" target="_blank">'+bullet.src+'</a>';}
if(bullet.provider==='ad_ydn'||bullet.provider==='ad_five'){var width=bullet.param.width!==undefined?bullet.param.width+'px':'auto';var height=bullet.param.height!==undefined?bullet.param.height+'px':'auto';html='<iframe framespacing="0" frameborder="no" scrolling="no" style="display: inline-block; width: '+width+'; height: '+height+' ;" src="//asumi.shinobi.jp/vomit?f='+bullet.frameId+'&r='+bullet.id+'"></iframe>';}
if(html!==null){bullet.render(html);switch(bullet.provider){case'ad_advertising_com':(function(bullet){var tried=0;var timer=window.setInterval(function(){var images=bullet.resourceContainer.getElementsByTagName('img');for(var index=0;index<images.length;index++){var image=images[index];if(image.getAttribute('width')==='1'&&image.getAttribute('height')==='1'){__asumi__.util.dom.setStyle(image,{display:'none'});}else{__asumi__.util.dom.setStyle(image,{border:'none',margin:'0',padding:'0','box-shadow':'none'});}}
if(++tried>=50){window.clearTimeout(timer);}},100);})(bullet);break;};}});if(bullet.type===__asumi__.config.resource.type.jsonp||frame.as==='jsonp'){bullet.param.callback=__asumi__.jsonp.registerCallback('jsonp_'+bullet.frameId,function(){var response=arguments[0];switch(bullet.provider){case'ad_admax_jsonp':response=arguments[1];break;};response=barrel.response(bullet,response)||response;switch(bullet.provider){case'ad_amoad_jsonp_sp':response=response.ads;break;case'ad_fluct_jsonp':response=response.success?[response.adObject]:[];break;case'ad_xlift_jsonp':response=Array.prototype.slice.call(response.p);break;};var ads=!(response instanceof Array)?[response]:response;if(ads.length===0){rePick();}else{var map=__asumi__.config.provider[bullet.provider].param.response||{};for(var index=0;index<ads.length;index++){var ad=ads[index];var adBullet=new __asumi__.Bullet();switch(bullet.provider){case'ad_adstir_jsonp':ad.image=ad.image||ad.icon;ad.description=ad.description===undefined?'':ad.description;break;case'ad_logly_jsonp':(new Image()).src=ad.beacon_url;break;case'ad_amoad_jsonp_sp':(new Image()).src=ad.NATIVE_IMP_URL;break;case'ad_admax_jsonp':(function(ad){for(var index=0;index<ad.imp_urls.length;index++){(new Image()).src=ad.imp_urls[index];}})(ad);break;case'ad_fluct_jsonp':ad.imageUrl=ad.img.src;ad.trackClick=(function(ad){return function(){ad.clickTracker.onClick();};})(ad);ad.impTracker.onImpression();break;case'ad_xlift_jsonp':(new Image()).src='//bc.x-lift.jp/ai/'+ad.bc;ad.u='//bc.x-lift.jp/acl/'+ad.bc;ad.i=ad.i.replace(/^https?:/,'');break;case'ad_criteo_jsonp':ad.ref=ad.products[0].click_url;ad.subject=ad.products[0].title;ad.description=ad.products[0].description;ad.imageUrl=ad.products[0].image.url;ad.optoutRef=ad.privacy.optout_click_url;ad.optoutImageUrl=ad.privacy.optout_image_url;ad.sponsor=ad.advertiser.description;(function(ad){for(var index=0;index<ad.impression_pixels.length;index++){(new Image()).src=ad.impression_pixels[index].url;}})(ad);break;case'ad_chikayo_jsonp':(new Image()).src=ad.impUrl;break;}
for(var prop in bullet){adBullet[prop]=map[prop]!==undefined?ad[map[prop]]:bullet[prop];}
if(bullet.provider==='ad_profitx_jsonp'){adBullet=(function(ad,adBullet){var imageIcon=null;var imageMain=null;adBullet.ref=ad.admNative.link.url;for(var index in ad.admNative.assets){var asset=ad.admNative.assets[index];switch(asset.id){case 1:imageIcon=asset.img.url;break;case 2:imageMain=asset.img.url;break;case 4:adBullet.description=asset.title.text;break;case 5:adBullet.subject=asset.title.text;break;case 7:adBullet.optoutRef=asset.link.url;adBullet.optoutImageUrl=asset.img.url;break;}}
adBullet.imageUrl=imageMain||imageIcon;for(index in ad.admNative.imptracker){(new Image()).src=ad.admNative.imptracker[index];}
return adBullet;})(ad,adBullet);}
if(adBullet.trackClick===null){adBullet.trackClick=function(){};}
if(bullet.provider==='ad_i_mobile'||bullet.provider==='ad_microad_pc'||bullet.provider==='ad_microad_sp'||bullet.provider==='ad_asta'||bullet.provider==='ad_mediad2'){(function(){var dummyFrame=document.createElement('iframe');__asumi__.util.dom.setStyle(dummyFrame,{display:'none'});document.body.appendChild(dummyFrame);if(bullet.provider==='ad_mediad2'){(function(){var now=new Date();var tomorrow=new Date(now.getTime()+86400000);var yesterday=new Date(now.getTime()-86400000);var values={now:now,tomorrow:tomorrow,yesterday:yesterday,nYear:now.getFullYear(),nMonth:now.getMonth(),nDate:now.getDate(),nDay:now.getDay(),nhr:now.getHours(),nmin:now.getMinutes(),month:now.getMonth(),day:now.getDate(),yYear:yesterday.getFullYear(),yMonth:yesterday.getMonth(),yDate:yesterday.getDate(),yDate2:tomorrow.getDate(),yDay:yesterday.getDay(),rand:Math.floor(Math.random()*140)+10,rand2:Math.floor(Math.random()*45)+40,rand3:Math.floor(Math.random()*4)+5,rand4:Math.floor(Math.random()*8999)+1000};if(values.day<10){values.day='0'+values.day;}
if(values.month<10){values.month='0'+values.month;}
values.hiduke=values.type5=values.yYear+'/'+values.month+'/'+values.day;var types=['type4','type6','type7','type8','type9','type10','type11','type12','type13','type21','type22','type23','type24','type25','type26','type27','type28','type29','type30','type31'];for(var index in types){values[types[index]]='';}
for(var key in values){dummyFrame.contentWindow[key]=values[key];}})();}
var dummyDocument=dummyFrame.contentWindow.document;dummyDocument.open();dummyDocument.write(adBullet.src);dummyDocument.close();var tried=0;var timer=window.setInterval(function(){var container=undefined;var source=undefined;switch(bullet.provider){case'ad_i_mobile':container=dummyDocument.getElementsByClassName('imobile_infeed_wide_spot')[0];if(container!==undefined){window.clearInterval(timer);adBullet.ref=container.getElementsByTagName('a')[0].getAttribute('href');adBullet.subject=container.getElementsByClassName('imobile_infeed_wide_title')[0].textContent;adBullet.description=container.getElementsByClassName('imobile_infeed_wide_description')[0].textContent;adBullet.imageUrl=container.getElementsByTagName('img')[0].getAttribute('src');document.body.removeChild(dummyFrame);barrel.render(adBullet);return;}
break;case'ad_microad_pc':case'ad_microad_sp':var containerWindow=undefined;container=dummyDocument.getElementsByTagName('iframe')[0];if(container!==undefined&&container.getAttribute('src')!==null){container=undefined;}
if(container!==undefined){containerWindow=container.contentWindow;container=container.contentWindow.document.getElementsByClassName('microad_compass_ad')[0];}
if(container!==undefined){source={ref:container.getElementsByTagName('a')[0],subject:container.getElementsByClassName('microad_compass_title')[0],description:container.getElementsByClassName('microad_compass_description')[0],imageUrl:container.querySelectorAll('.microad_compass_image img')[0],trackClick:containerWindow.clickTracking};if(source.ref!==undefined&&source.subject!==undefined&&source.description!==undefined&&source.imageUrl!==undefined){window.clearInterval(timer);adBullet.ref=source.ref.getAttribute('href');adBullet.subject=source.subject.textContent;adBullet.description=source.description.textContent;adBullet.imageUrl=source.imageUrl.getAttribute('src');if(source.trackClick!==undefined){adBullet.trackClick=Function('('+source.trackClick.toString()+')()');}
document.body.removeChild(dummyFrame);barrel.render(adBullet);return;}}
break;case'ad_asta':container=dummyDocument.getElementsByTagName('iframe')[0];if(container!==undefined){container=container.contentWindow.document;}
if(container!==undefined){source={subject:container.getElementsByClassName('gn-nad_text-title')[0],description:container.getElementsByClassName('gn-nad_text-desc')[0],imageUrl:container.getElementsByClassName('gn-nad_image-icon')[0],optoutRef:container.getElementsByClassName('gn-nad_text-opt')[0]};if(source.subject!==undefined&&source.description!==undefined&&source.imageUrl!==undefined&&source.optoutRef!==undefined){window.clearInterval(timer);adBullet.ref=source.subject.parentNode.getAttribute('href');adBullet.subject=source.subject.textContent;adBullet.description=source.description.textContent;adBullet.imageUrl=source.imageUrl.getAttribute('src');adBullet.optoutRef=source.optoutRef.parentNode.getAttribute('href');document.body.removeChild(dummyFrame);barrel.render(adBullet);return;}}
break;case'ad_mediad2':container=dummyDocument.getElementsByClassName('med_bloc')[0];if(container!==undefined){var scan=function(classes){for(var index in classes){var element=container.getElementsByClassName(classes[index])[0];if(element!==undefined){return element;}}
return undefined;};source={subject:scan(['med_txt_short_ec','med_txt_short_game','med_txt_name','med_txt_short_comu','med_txt_short_lc','med_txt_short_ifs']),description:scan(['med_txt_verylong_ec','med_txt_verylong_game','med_txt_verylong','med_txt_verylong_comu','med_txt_verylong_lc','med_txt_verylong_ifs'])};if(source.subject!==undefined&&source.description!==undefined){window.clearInterval(timer,container);adBullet.ref=container.parentNode.getAttribute('href');adBullet.subject=source.subject.textContent.replace(/document\.write.+;/,'');adBullet.description=source.description.textContent.replace(/document\.write.+;/,'');adBullet.imageUrl=container.getElementsByClassName('med_imgfield')[0].getElementsByTagName('img')[0].getAttribute('src');document.body.removeChild(dummyFrame);barrel.render(adBullet);}}
break;}
if(++tried>=12){window.clearInterval(timer);document.body.removeChild(dummyFrame);rePick();}},100);})();}else{barrel.render(adBullet);}}}});}
bullet=(function(){var _default=__asumi__.config.provider[bullet.provider].param['default']||{};for(var param in _default){bullet.param[param]=eval(_default[param]);}
return bullet;})();bullet=barrel.prepare(bullet)||bullet;if(bullet.type===__asumi__.config.resource.type.jsonp){var script=document.createElement('script');script.setAttribute('type','text/javascript');script.setAttribute('charset','utf-8');var src='';switch(bullet.provider){case'ad_adstir_jsonp':window.adstir_vars=bullet.param;window.adstir_vars.native_callback=__asumi__.util.dotToObject(bullet.param.callback);src=bullet.ref;break;case'ad_profitx_jsonp':window.onpfxadload=__asumi__.util.dotToObject(bullet.param.callback);script.setAttribute('class','ca_profitx_ad');script.setAttribute('data-ca-profitx-spotid','pfxad_'+bullet.param['tagid']);src=bullet.ref+bullet.param['tagid']+'/pfx.js';break;case'ad_admax_jsonp':var div=document.createElement('div');div.setAttribute('class','admax-native');div.setAttribute('data-admax-id',bullet.param.id);div.setAttribute('data-admax-callback',bullet.param.callback);document.body.appendChild(div);src=bullet.ref;break;case'ad_criteo_jsonp':window.Criteo=window.Criteo||{};window.Criteo.events=window.Criteo.events||[];window.Criteo.events.push(function(){let slotId=bullet.param.callback;var callback=__asumi__.util.dotToObject(bullet.param.callback);var bid=null;var adUnits={placements:[{slotid:slotId,zoneid:bullet.param.zoneid,nativeCallback:callback}]};window.Criteo.RequestBids(adUnits,function(){bid=window.Criteo.GetBidsForAdUnit(slotId)[0]||null;},2000);var tried=0;var timer=window.setInterval(function(){if(bid!==null){window.clearTimeout(timer);window.Criteo.RenderAd(bid.id);}else if(++tried>=10){window.clearTimeout(timer);callback([]);}},100);});src=bullet.ref;break;default:var params=[];for(var key in bullet.param){if(bullet.param[key]!==null){params.push(key+'='+bullet.param[key]);}}
src=bullet.ref+'?'+params.join('&');}
switch(bullet.provider){case'ad_xlift_jsonp':(function(){var dummyFrame=document.createElement('iframe');__asumi__.util.dom.setStyle(dummyFrame,{display:'none'});document.body.appendChild(dummyFrame);dummyFrame.contentWindow.XLR={onRecommendResponse:function(response){document.body.removeChild(dummyFrame);__asumi__.util.dotToObject(bullet.param.callback)(response);}};var dummyDocument=dummyFrame.contentWindow.document;dummyDocument.open();dummyDocument.write(script.outerHTML);dummyDocument.close();})();break;case'ad_chikayo_jsonp':__asumi__.fetchFriendly(function(friendly){if(friendly){__asumi__.fetchAudienceId(function(audienceId){var requestId=(function(){let chars='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.split('');for(let i=0,len=chars.length;i<len;i++){switch(chars[i]){case'x':chars[i]=Math.floor(Math.random()*16).toString(16);break;case'y':chars[i]=(Math.floor(Math.random()*4)+8).toString(16);break;}}
return chars.join('');})();src+='&audience_id='+audienceId+'&req_id='+requestId+'&tagid='+bullet.frameId;script.setAttribute('src',src);document.body.appendChild(script);});}else{__asumi__.util.dotToObject(bullet.param.callback)([]);}});break;default:script.setAttribute('src',src);document.body.appendChild(script);}}else if(frame.as==='jsonp'){__asumi__.util.dotToObject(bullet.param.callback)(bullet);}else{barrel.render(bullet);}},jsonp:{callback:{},registerCallback:function(key,callback){key=key+'_'+(new Date()).getTime();this.callback[key]=callback;return'__asumi__.jsonp.callback.'+key;}},passback:{callback:{},call:function(frameId){this.callback[frameId]();},registerCallback:function(frameId,callback){this.callback[frameId]=callback;return'__asumi__.passback.callback.'+frameId;}},track:{registered:{},register:function(resourceId,element,observer){if(this.registered[resourceId]===undefined){this.registered[resourceId]={element:element,tracked:{},eventManager:new __asumi__.EventManager(),observer:observer};}
if(element!==undefined){this.watchElement(resourceId,element);}
return this;},unregister:function(resourceId){this.registered[resourceId].eventManager.off();delete this.registered[resourceId];},watchElement:function(resourceId,element){this.registered[resourceId].element=element;this.imp(resourceId);this.listener.scroll();var eventManager=this.registered[resourceId].eventManager;var anchors=element.getElementsByTagName('a');for(var index=0;index<anchors.length;index++){eventManager.on(anchors[index],'click',__asumi__.track.listener.click).on(anchors[index],'mousedown',__asumi__.track.listener.click);}
var onMouse=false;var timer=null;eventManager.on(element,'mouseleave',function(){onMouse=false;}).on(element,'mouseenter',function(target,e){window.clearTimeout(timer);onMouse=true;timer=window.setTimeout(function(){if(onMouse){__asumi__.track.listener.hover(target,e);}},500);});},track:function(action,resourceId){if(this.registered[resourceId].tracked[action]===true){return;}
this.registered[resourceId].observer.update({type:'track',action:action});(new Image()).src='//asumi.shinobi.jp/track?r='+resourceId+'&a='+action+'&_='+Date.now();this.registered[resourceId].tracked[action]=true;},pick:function(resourceId){this.track('pick',resourceId);},imp:function(resourceId){this.track('imp',resourceId);},view:function(resourceId){this.track('view',resourceId);},hover:function(resourceId){this.track('hover',resourceId);},click:function(resourceId){this.track('click',resourceId);},passback:function(resourceId){this.track('passback',resourceId);},listener:{scroll:function(){var windowProperty=__asumi__.util.dom.getWindowProperty();for(var resourceId in __asumi__.track.registered){var element=__asumi__.track.registered[resourceId].element;if(element!==undefined){var bounding=element.getBoundingClientRect();if((windowProperty.innerHeight-bounding.height)>=bounding.top&&(bounding.top)>=0&&(windowProperty.innerWidth-bounding.width)>=bounding.left&&(bounding.left)>=0){__asumi__.track.view(resourceId);}}}},click:function(target,e){if(e.which!==1&&e.which!==2){return;}
for(var resourceId in __asumi__.track.registered){var parent=target;while(parent!==null){if(__asumi__.track.registered[resourceId].element==parent){__asumi__.track.click(resourceId);break;}
parent=parent.parentNode;}}},hover:function(target,e){for(var resourceId in __asumi__.track.registered){if(__asumi__.track.registered[resourceId].element==target){__asumi__.track.hover(resourceId);}}}}},effect:{overlay:{timer:null,elements:[],creativeFindLimit:15,getElementInfo:function(element){var size={width:[0],height:[0]};var elementRect=element.getBoundingClientRect();if(elementRect.width!==0&elementRect.height!==0){for(var property in size){if(element.hasAttribute(property)&&!isNaN(element.getAttribute(property).replace('px',''))){size[property].push(element.getAttribute(property).replace('px',''));}
if(element.style[property]!==''&&!isNaN(element.style[property].replace('px',''))){size[property].push(element.style[property].replace('px',''));}
if(typeof element[property]==='number'){size[property].push(element[property]);}}}
return{tagName:element.tagName.toLowerCase(),width:Math.max.apply(Math,size.width),height:Math.max.apply(Math,size.height)};},findCreatives:function(containerElement,expandWidth){var elements=[];var iframes=containerElement.getElementsByTagName('iframe');var images=containerElement.getElementsByTagName('img');var sourceElements=Array.prototype.slice.call(iframes,0).concat(Array.prototype.slice.call(images,0));for(var index=0;sourceElements.length>index;index++){var elementInfo=this.getElementInfo(sourceElements[index]);if(elementInfo.width>50&&elementInfo.height>1&&elementInfo.width<=expandWidth){elements.push(sourceElements[index]);}}
return elements;},apply:function(element,bullet){var prElement=document.createElement('div');prElement.innerHTML='SPONSOR';__asumi__.util.dom.setStyle(prElement,{lineHeight:'20px',fontSize:'12px',height:'20px',textAlign:'center',color:'#fff',backgroundColor:'#000'});__asumi__.util.dom.setStyle(element,{display:'none',position:'fixed',zIndex:2147483647});this.elements.push({element:element,bullet:bullet,prElement:prElement,creativeFindTried:0});this.show();},unapply:function(element){var elements=[];for(var index=0;index<this.elements.length;index++){if(this.elements[index].element===element){this.elements[index].element.removeAttribute('style');__asumi__.util.dom.setStyle(this.elements[index].prElement,{display:'none'});}else{elements.push(this.elements[index]);}}
this.elements=elements;},show:function(){window.clearTimeout(this.timer);var self=this;this.timer=window.setTimeout(function(){if(document.readyState!=='complete'){self.show();return;}
var windowProperty=__asumi__.util.dom.getWindowProperty();var shorter=Math.min(windowProperty.innerWidth,windowProperty.innerHeight);var mag=windowProperty.innerWidth/windowProperty.scrollWidth;var expandWidth=Math.min(windowProperty.scrollWidth*mag,shorter);for(var index=0;index<self.elements.length;index++){var elementProperty=self.elements[index];var element=self.elements[index].element;__asumi__.util.dom.setStyle(element,{display:'',left:0});var asumiIframe=elementProperty.bullet.asIframe?element.getElementsByTagName('iframe')[0]:undefined;if(elementProperty.bullet.asIframe&&asumiIframe.contentWindow.document.readyState!=='complete'){self.show();return;}
var creativeElements=self.findCreatives(elementProperty.bullet.asIframe?asumiIframe.contentWindow.document:element,expandWidth);if(creativeElements.length===0&&++elementProperty.creativeFindTried<self.creativeFindLimit){self.show();return;}
var creative={width:0,height:0};for(var creativeIndex=0;creativeElements.length>creativeIndex;creativeIndex++){var elementInfo=self.getElementInfo(creativeElements[creativeIndex]);creative.width=Math.max(creative.width,elementInfo.width);creative.height=Math.max(creative.height,elementInfo.height);if(elementInfo.tagName==='iframe'||elementInfo.tagName==='img'){__asumi__.util.dom.setStyle(creativeElements[creativeIndex],{display:'block'});}}
element.appendChild(elementProperty.prElement);__asumi__.util.dom.setStyle(elementProperty.prElement,{display:creative.height>50||windowProperty.innerWidth>windowProperty.innerHeight?'none':'block'});if(elementProperty.bullet.asIframe){__asumi__.util.dom.setStyle(asumiIframe,{width:creative.width+'px',height:creative.height+'px'});}
if(expandWidth!==creative.width){var zoomScale=(expandWidth/creative.width);__asumi__.util.dom.setStyle(element,{transform:'scale('+zoomScale+', '+zoomScale+')'});}
var elementBoundingClientRect=element.getBoundingClientRect();var elementHeight=elementBoundingClientRect.height;var elementWidth=elementBoundingClientRect.width;var nearFooter=windowProperty.scrollY!==0&&windowProperty.scrollHeight>=window.innerHeight&&(windowProperty.innerHeight+windowProperty.scrollY+elementHeight)>=windowProperty.scrollHeight;var style={left:((windowProperty.innerWidth/2)-(elementWidth/2)+windowProperty.scrollX)+'px',top:null,bottom:null};if(nearFooter){style.top=0;style.transformOrigin='0 top 0';}else{style.bottom=0;style.transformOrigin='0 bottom 0';}
__asumi__.util.dom.setStyle(element,style);}},100);},listener:function(){this.show();}}},util:{dotToObject:function(string){var parts=string.split('.');var result=window;while(parts.length>0){result=result[parts.shift()];}
return result;},toDate:function(string){var parts=string.match(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})/);var date=new Date();date.setFullYear(parts[1]);date.setMonth(parts[2]-1);date.setDate(parts[3]);date.setHours(parts[4]);date.setMinutes(parts[5]);date.setSeconds(parts[6]);date.setMilliseconds(0);return date;},dom:{on:function(target,event,callback){if(target.addEventListener){target.addEventListener(event,callback);}else if(target.attachEvent){target.attachEvent('on'+event,callback);}},off:function(target,event,callback){if(target.removeEventListener){target.removeEventListener(event,callback);}else if(target.detachEvent){target.detachEvent('on'+event,callback);}},setStyle:function(element,style){for(var property in style){element.style[property]=style[property];}},getWindowProperty:function(){return{innerWidth:window.innerWidth?window.innerWidth:document.documentElement.clientWidth,innerHeight:window.innerHeight?window.innerHeight:document.documentElement.clientHeight,scrollWidth:document.documentElement.scrollWidth||document.body.scrollWidth,scrollHeight:document.documentElement.scrollHeight||document.body.scrollHeight,scrollX:document.documentElement.scrollLeft||document.body.scrollLeft,scrollY:document.documentElement.scrollTop||document.body.scrollTop};}}}};__asumi__.config={"provider":{"ad_alist":{"label":"A-list","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_ad_vanx":{"label":"AD-VANX","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_adpresso":{"label":"ADPRESSO","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_adroute":{"label":"ADroute","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_amoad_sp":{"label":"AMoAd","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_amoad_jsonp_sp":{"label":"AMoAd\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/n.amoad.com\/n\/v1\/"}},"param":{"require":{"0":"sid"},"response":{"ref":"NATIVE_LINK","subject":"NATIVE_TITLE_SHORT","description":"NATIVE_TITLE_LONG","imageUrl":"NATIVE_ICON_URL"}}},"ad_advertising_com":{"label":"AOL","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_arata":{"label":"ARATA","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_ad_generation":{"label":"Ad Generation","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_admax":{"label":"AdMax","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_admax_jsonp":{"label":"AdMax\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/adm.shinobi.jp\/st\/na.js"}},"param":{"require":{"0":"id"},"response":{"ref":"click_url","subject":"title","description":"description","imageUrl":"image_url","optoutRef":"optout_url"}}},"ad_adstir":{"label":"AdStir","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_adstir_adx":{"label":"AdStir (ADX)","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_adstir_jsonp":{"label":"AdStir\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/js.ad-stir.com\/js\/adstir_native.js"}},"param":{"require":{"0":"app_id","1":"ad_spot"},"default":{"ver":"\"4.0\"","type":"\"native\"","async":true,"native_vars":{"sponsoredText":"","title":{"length":60},"description":{"length":200},"icon":true}},"response":{"ref":"clickUrl","subject":"title","description":"description","imageUrl":"image"}}},"ad_google_adsense":{"label":"Adsense","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_andc":{"label":"And C","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_asta":{"label":"Asta","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_criteo":{"label":"Criteo","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_criteo_jsonp":{"label":"Criteo\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"https:\/\/static.criteo.net\/js\/ld\/publishertag.js"}},"param":{"require":{"0":"zoneid"},"response":{"ref":"ref","subject":"subject","description":"description","imageUrl":"imageUrl","optoutRef":"optoutRef","optoutImageUrl":"optoutImageUrl","sponsor":"sponsor"}}},"ad_five":{"label":"FIVE","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_fenix":{"label":"Fenix","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_fluct":{"label":"Fluct","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_fluct_jsonp":{"label":"Fluct\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"https:\/\/cdn-fluct.sh.adingo.jp\/native_callback.js"}},"param":{"require":{"0":"G"},"response":{"ref":"linkUrl","subject":"title","description":"description","imageUrl":"imageUrl","optoutRef":"optoutUrl","trackClick":"trackClick","sponsor":"sponsor"}}},"ad_gmo_ssp":{"label":"GMO SSP","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_gsm":{"label":"GSM","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_geniee":{"label":"Geniee","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_liveaid":{"label":"LiveAid","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_maist_pc":{"label":"MAIST PC","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_maist_jsonp_pc":{"label":"MAIST PC\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/ad.maist.jp\/ad\/p\/nta"}},"param":{"require":{"0":"_site","1":"_loc"},"default":{"_nta":1},"response":{"ref":"url","subject":"title","description":"description1","imageUrl":"image"}}},"ad_maist_sp":{"label":"MAIST SP","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_maist_jsonp_sp":{"label":"MAIST SP\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/ad.maist.jp\/ad\/sp\/ssi"}},"param":{"require":{"0":"_site","1":"_loc"},"default":{"_nta":1},"response":{"ref":"url","subject":"title","description":"description1","imageUrl":"image"}}},"ad_mapps":{"label":"MAPPS","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_mediad2":{"label":"MEDIAD2","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_microad_pc":{"label":"MicroAd PC","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_microad_sp":{"label":"MicroAd SP","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_prebidjs":{"label":"Prebid.js","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_profitx":{"label":"ProFit-X","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_profitx_jsonp":{"label":"ProFit-X\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/cdn.caprofitx.com\/tags\/"}},"param":{"require":{"0":"tagid"}}},"ad_tapone_jsonp":{"label":"TAPONE\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/ap.tapone.jp\/deliver\/"}},"param":{"require":{"0":"_spot"},"default":{"ref":"window.document.referrer","_j":1},"response":{"ref":"href","subject":"title","description":"description","imageUrl":"image"}}},"ad_xlift_jsonp":{"label":"X-lift\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"https:\/\/rec.x-lift.jp\/rcm"}},"param":{"require":{"0":"i"},"default":{"u":"\"\""},"response":{"ref":"u","subject":"s","description":"t","imageUrl":"i"}}},"ad_ydn":{"label":"YDN","resource":{"default":{"type":"text\/html"}},"param":{"require":{"0":"width","1":"height"}}},"ad_yahoo":{"label":"Yahoo","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_i_mobile":{"label":"i-mobile","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_logly_jsonp":{"label":"logly\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/liftapi.logly.co.jp\/lift.json"}},"param":{"require":{"0":"p_id"},"default":{"url":"window.document.location.href","ref":"window.document.referrer","ad_count":1,"media_type":2,"site":"\"site\""},"response":{"ref":"url","subject":"title","description":"lead","imageUrl":"image_url"}}},"ad_nend":{"label":"nend","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_yicha_pc":{"label":"yicha PC","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_yicha_sp":{"label":"yicha SP","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_yicha_jsonp_sp":{"label":"yicha SP\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/adone.yicha.jp\/extra\/native.php"}},"param":{"require":{"0":"nid"},"response":{"ref":"Url","subject":"Title","description":"Body","imageUrl":"ImgUrl"}}},"ad_gmo_nikko":{"label":"\u304a\u540d\u524d.com","resource":{"default":{"type":"text\/html"}},"param":{}},"ad_chikayo":{"label":"\u3061\u304b\u3088","resource":{"default":{"type":"x-asumi\/chikayo"}},"param":{"require":{"0":"width","1":"height","2":"device","3":"frame_id"}}},"ad_chikayo_jsonp":{"label":"\u3061\u304b\u3088\uff08\u30cd\u30a4\u30c6\u30a3\u30d6\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"\/\/chikayo-dsp.shinobi.jp\/asumi\/take"}},"param":{"require":{"0":"product_id"},"response":{"ref":"ref","subject":"subject","description":"description","imageUrl":"imageUrl"}}},"ad_empty":{"label":"\u30ab\u30e9\u5e83\u544a","resource":{"default":{"type":"x-asumi\/empty"}},"param":{}},"service_antenna_jsonp":{"label":"\u5fcd\u8005\u30a2\u30f3\u30c6\u30ca\uff08\u6885\u96e8\uff09","resource":{"default":{"type":"x-asumi\/jsonp","ref":"http:\/\/antenna.shinobi.jp\/api\/pr\/pr_pickup.js"}},"param":{"require":{"0":"articleid","1":"rssid"},"response":{"ref":"ref","subject":"description","description":"description","imageUrl":"imageUrl"}}},"ad_direct":{"label":"\u7d14\u5e83\u544a","resource":{"allow":{"0":"image\/png","1":"image\/gif","2":"image\/jpeg","3":"text\/html","4":"text\/plain"}},"param":{}},"ad_direct_oyasan":{"label":"\u7d14\u5e83\u544a\uff08\u307f\u3093\u306a\u3067\u5927\u5bb6\u3055\u3093\uff09","resource":{"allow":{"0":"image\/png","1":"image\/gif","2":"image\/jpeg","3":"text\/html","4":"text\/plain"}},"param":{}},"ad_owned":{"label":"\u81ea\u793e\u5e83\u544a","resource":{"allow":{"0":"image\/png","1":"image\/gif","2":"image\/jpeg","3":"text\/html","4":"text\/plain"}},"param":{}},"ad_team_admax_dmm":{"label":"\u81ea\u793e\u5e83\u544a\uff08AdMax\u30c1\u30fc\u30e0 DMM\u7528\uff09","resource":{"allow":{"0":"image\/png","1":"image\/gif","2":"image\/jpeg","3":"text\/html","4":"text\/plain"}},"param":{}},"ad_team_admax":{"label":"\u81ea\u793e\u5e83\u544a\uff08AdMax\u30c1\u30fc\u30e0\u7528\uff09","resource":{"allow":{"0":"image\/png","1":"image\/gif","2":"image\/jpeg","3":"text\/html","4":"text\/plain"}},"param":{}},"ad_test":{"label":"\u904b\u7528\u30c6\u30b9\u30c8\u7528","resource":{"allow":{"0":"image\/png","1":"image\/gif","2":"image\/jpeg","3":"text\/html","4":"text\/plain"}},"param":{}}},"resource":{"type":{"png":"image\/png","gif":"image\/gif","jpg":"image\/jpeg","html":"text\/html","text":"text\/plain","jsonp":"x-asumi\/jsonp","chikayo":"x-asumi\/chikayo","empty":"x-asumi\/empty"}}};(function(){var globalEvents=new __asumi__.EventManager();globalEvents.on(window,'scroll',function(){__asumi__.track.listener.scroll();},500);globalEvents.on(window,'scroll',function(){__asumi__.effect.overlay.listener();});globalEvents.on(window,'touchmove',function(target,event){__asumi__.effect.overlay.listener();});globalEvents.on(window,'resize',function(){__asumi__.effect.overlay.listener();});})();return __asumi__;})();